# my-first-go
Проект: Сайт по бронированию билетов на концерты

Общая идея проекта
Цель проекта — создать простой веб-сервис, который позволяет пользователям:
•	просматривать список концертов,
•	выбирать концерт,
•	видеть, сколько билетов осталось,
•	регистрироваться и загружать аватар,
•	отправлять запрос на покупку билета (с уведомлением организатора по e-mail).
⸻

Основной функционал
2.1 Регистрация пользователя
•	Пользователь вводит: имя, e-mail, пароль.
•	После регистрации создаётся профиль пользователя.
•	Возможность загрузить/ удалить аватар (изображение).
•	Данные о пользователях сохраняются в базу данных.

2.2 Список концертов
•	Отображается список всех концертов (название, дата, место, количество доступных билетов).
•	Каждый концерт можно открыть (страница/запрос для одного концерта).

2.3 Просмотр концерта
•	При открытии концерта отображается:
•	описание мероприятия,
•	количество оставшихся билетов,
•	кнопка «Хочу купить билет».

2.4 Покупка билета
•	При нажатии кнопки отправляется запрос, что пользователь хочет купить билет.
•	Система отправляет уведомление (по e-mail) организатору концерта.
•	Количество доступных билетов уменьшается на 1 (если они есть).
•	Выводить сообщение “Письмо отправлено организатору”.

3 Технические детали реализации
3.1 Архитектура

На первом этапе — монолитное приложение, позже можно разделить на микросервисы:
•	Auth-сервис — регистрация и авторизация пользователей.
•	Concert-сервис — работа с концертами и билетами.
•	Notification-сервис — отправка писем организаторам.

Взаимодействие между сервисами возможно через REST API или gRPC.
Для обмена сообщениями можно использовать брокер сообщений (RabbitMQ).
Язык: Go
Архитектура: микросервисная
Сервисы: Auth, Concert, Notification
Брокер: RabbitMQ
БД: PostgreSQL


Этап 1 — Подготовка проекта
•	Создать GitHub-репозиторий/отдельную ветку
•	Настроить структуру проекта (папки auth/, concert/, notification/, common/).
•	Настроить docker-compose.yml для запуска всех сервисов:
•	auth-service
•	concert-service
•	notification-service
•	postgres
•	rabbitmq
•	Настроить .env файлы (доступы к БД, очередям, портам).
•	Использовать Go Modules (go mod init).

Этап 2 — Auth-сервис (регистрация и пользователи)
Функционал:
•	Регистрация пользователя (POST api/users)
•	Авторизация (POST /api/auth/users)
•	Получение профиля (GET /api/users/{id})
•	Загрузка аватара (POST /api/ users/{id}/avatar)
Технические детали:
•	Хранение пользователей в таблице users (PostgreSQL).
•	Пароли — в хэшированном виде (bcrypt).
•	Аутентификация через JWT.
•	Выдача токена при логине.
•	Возможность получения данных о пользователе через токен.

Этап 3 — Concert-сервис (концерты и билеты)
Функционал:
•	Получить список концертов (GET /concerts)
•	Получить данные по конкретному концерту (GET /concerts/{id})
•	Создание концерта (для теста, POST /concerts)
•	Покупка билета (POST /concerts/{id}/buy-ticket)
Логика покупки:
•	Проверка доступных билетов.
•	Если билет есть — уменьшаем tickets_left.
•	Отправляем сообщение в RabbitMQ → Notification-сервису.
Таблицы:
•	concerts(id, title, date, location, tickets_total, tickets_left, organizer_email)
•	tickets(id, user_id, concert_id, status)

Этап 4 — Notification-сервис (уведомления)
Функционал:
•	Подписка на очередь RabbitMQ (например, ticket_requests).
•	Получение события “ticket_requested”.
•	Отправка уведомления организатору по email (через SMTP).
•	Логирование всех отправленных уведомлений в таблицу notifications.
Таблица:
•	notifications(id, concert_id, user_id, status, sent_at)

Этап 5 — Взаимодействие между сервисами
•	Auth и Concert общаются через REST API или gRPC.
•	Concert → публикует события в RabbitMQ при покупке.
•	Notification → слушает очередь и обрабатывает события.


Этап 6 — База данных
•	Используется PostgreSQL (одна база или отдельная для каждого сервиса).
•	Подключение через драйвер pgx или ORM (например, GORM / sqlx).
•	Миграции — golang-migrate.
•	Создать таблицы:
•	users
•	concerts
•	tickets
•	notifications
